.mp-sh-menu
  mp-drop-menu(attrs={open}, on={change: $helpers.handleDropMenuChange})
    .mp-sh-menu-container(attrs={'slot-body': true})
      .mp-sh-triangle-up
        svg-icon(attrs={icon: 'triangle-up'})
      .mp-sh-menu-header
        .mp-sh-menu-title Automated insights
        .mp-sh-menu-clear-all(
          on={click: $helpers.handleClearAllAlerts}
          class={'mp-sh-hide-clear-all': smartHubAlerts.length == 0}
        ) Clear all
      .mp-sh-menu-divider
      if smartHubAlerts.length > 0
        .mp-sh-alerts-container(
          on={scroll: $helpers.fetchAlertsIfNeeded}
          hook={
            insert: $helpers.fetchAlertsIfNeeded,
            postpatch: $helpers.fetchAlertsIfNeeded,
          }
        )
          for smartHubAlert in smartHubAlerts
            if smartHubAlert.isDeleted
              .mp-sh-deleted-alert(
                hook={insert: vnode => $helpers.insertedDeletedAlert(vnode.elm, smartHubAlert)}
                style={height: `${smartHubAlert.height}px`}
              )
            else
              mp-smart-hub-alert(
                attrs={
                  'project-id': $component.getAttribute(`project-id`) || ``,
                  'access-token': $component.getAttribute(`access-token`) || ``,
                  'display-context': `GLOBAL`,
                  'smart-hub-alert': JSON.stringify(smartHubAlert),
                }
                on={
                  clickedLink: $helpers.handleClickedLink,
                  markedUsefulness: $helpers.handleMarkedUsefulness,
                  removedAlert: $helpers.handleRemovedAlert,
                }
              )
            .mp-sh-menu-divider
      else
        .mp-sh-empty-state
          .mp-sh-empty-state-icon
            // TODO(mack): Add actual gif
            svg-icon(attrs={icon: `tv`})
          .mp-sh-empty-state-text-primary No current insights
          .mp-sh-empty-state-text-secondary
            | We automatically find insights about your data and surface them here
